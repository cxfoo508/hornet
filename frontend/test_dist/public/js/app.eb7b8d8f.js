(function(e){function t(t){for(var s,o,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},n=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"05d2":function(e,t,a){"use strict";a("30f6")},1818:function(e,t,a){"use strict";a("2f28")},"187a":function(e,t,a){},"23f5":function(e,t,a){},2526:function(e,t,a){},"2f28":function(e,t,a){},"30a8":function(e,t,a){"use strict";a("2526")},"30f6":function(e,t,a){},3671:function(e,t,a){"use strict";a("5d33")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s,r=a("a026"),n=a("5c96"),o=a.n(n),i=(a("0fae"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),l=[],c=(a("034f"),a("2877")),u={},d=Object(c["a"])(u,i,l,!1,null,null,null),m=d.exports,p=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("h1",[e._v("这是一个home页面")]),a("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},g=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v("This is HelloWorld page.")]),a("h1",[e._v(e._s(e.msg))])])},b=[],v={name:"HelloWorld",props:{msg:String}},k=v,w=(a("05d2"),Object(c["a"])(k,h,b,!1,null,"020922e1",null)),y=w.exports,_={name:"Home",components:{HelloWorld:y}},j=_,x=Object(c["a"])(j,f,g,!1,null,null,null),F=x.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"main-windows"},[e._m(0),a("el-tabs",{staticClass:"login-windows",attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"登录",name:"first"}},[a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户",prop:"username"}},[a("el-input",{model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"270px"},attrs:{type:"primary"},on:{click:function(t){return e.submitLogin("loginForm")}}},[e._v("登录")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"注册",name:"second"}},[a("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户",prop:"username"}},[a("el-input",{model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),a("el-form-item",{attrs:{label:"设置密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"confirm_password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.registerForm.confirm_password,callback:function(t){e.$set(e.registerForm,"confirm_password",t)},expression:"registerForm.confirm_password"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"340px"},attrs:{type:"primary"},on:{click:function(t){return e.submitRegister("registerForm")}}},[e._v("注册")])],1)],1)],1)],1)],1)])},O=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-desc"},[a("h2",[e._v("____管理平台_____")]),a("p",[e._v("————————")])])}],$=a("d4ec"),T=a("bee2"),R=(a("d3b7"),a("159b"),a("b64b"),a("bc3a")),S=a.n(R),D=a("4328"),P=a.n(D);function I(e){return-1!==String(e).indexOf("账户登录失败")}function L(e,t,a,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n={"Access-Control-Allow-Origin":"*"};Object.keys(r).forEach((function(e){n[e]=r[e]}));var o={headers:n,responseType:"json",maxRedirects:5};return"data"===s?(console.log(s),a=P.a.stringify(a)):"blob"===s&&(o.responseType="blob",o.method="get"),"get"===e?(o.params=a,S.a.get(t,o)):"post"===e?S.a.post(t,a,o):"delete"===e?S.a.delete(t,o):"put"===e?S.a.put(t,a,o):S.a.request(o)}function M(e,t,a,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return o&&(s=n["Loading"].service({fullscreen:!0})),L(e,t,a,r,i).then((function(e){o&&s.close();var t=e.data;return!1===t.success?Promise.reject(t):t})).catch((function(e){var t={};if(t=Object.prototype.hasOwnProperty.call(e,"response")?e.response.data:e,console.log("error: ",e),!I(t))return o&&s.close(),e;window.location.reload()}))}S.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_URL,S.a.defaults.headers.post["X-Requested-With"]="XMLHttpRequest",S.a.defaults.timeout=3e5;var E={get:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return M("get",e,t,a,s,r)},post:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return M("post",e,t,a,s,r)},delete:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return M("delete",e,t,a,s,r)},patch:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return M("patch",e,t,a,s,r)},put:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return M("put",e,t,a,s,r)}},V=function(){function e(){Object($["a"])(this,e)}return Object(T["a"])(e,[{key:"login",value:function(e){return E.post("/api/users/login",e)}},{key:"logout",value:function(e){return E.delete("/api/users/login/",e)}},{key:"register",value:function(e){return E.post("/api/users/register",e)}}]),e}(),q=new V,z={name:"Home",components:{},data:function(){return{activeName:"first",loginForm:{username:"admin",password:"123456"},registerForm:{username:"",password:"",confirm_password:""},rules:{username:[{required:!0,message:"请输入用户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm_password:[{required:!0,message:"请输入确认密码",trigger:"blur"}]}}},methods:{handleClick:function(e,t){console.log(e,t)},submitLogin:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;q.login(t.loginForm).then((function(e){!0===e.success?(sessionStorage.token=e.item.token,sessionStorage.user=e.item.username,t.$router.push({path:"/main"}),t.$message.success("登录成功！")):t.$message.error(e.error.message)}))}))},submitRegister:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;q.register(t.registerForm).then((function(e){!0===e.success?t.$message.success("注册成功！"):t.$message.error(e.error.message)}))}))}}},N=z,U=(a("d6db"),Object(c["a"])(N,C,O,!1,null,null,null)),H=U.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"navigation"},[s("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[s("el-aside",{staticStyle:{"background-color":"#343a40"},attrs:{width:"200px"}},[s("img",{staticClass:"logo",attrs:{alt:"itest logo",src:a("9b19")}}),s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"onRoutes","background-color":"#343a40","text-color":"#fff","active-text-color":"#ffd04b"}},[s("router-link",{attrs:{to:"/main/project"}},[s("el-menu-item",{staticClass:"menu-option",attrs:{index:"1"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("项目管理")]},proxy:!0}])},[s("i",{staticClass:"el-icon-menu"})])],1),s("router-link",{attrs:{to:"/main/case"}},[s("el-menu-item",{staticClass:"menu-option",attrs:{index:"2"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("用例管理")]},proxy:!0}])},[s("i",{staticClass:"el-icon-s-grid"})])],1),s("router-link",{attrs:{to:"/main/tasks"}},[s("el-menu-item",{staticClass:"menu-option",attrs:{index:"3"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("任务管理")]},proxy:!0}])},[s("i",{staticClass:"el-icon-message-solid"})])],1),s("router-link",{attrs:{to:"/main/report"}},[s("el-menu-item",{staticClass:"menu-option",attrs:{index:"5"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" 报告管理")]},proxy:!0}])},[s("i",{staticClass:"el-icon-s-order"})])],1)],1)],1),s("el-container",[s("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[s("el-dropdown",[s("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[e._v("查看")]),s("el-dropdown-item",[e._v("新增")]),s("el-dropdown-item",[e._v("删除")])],1)],1),s("span",[e._v("欢迎~ "+e._s(e.user))])],1),s("el-main",{staticStyle:{"background-color":"#f1f3fa"}},[s("el-card",[s("router-view")],1)],1)],1)],1)],1)},A=[],W={computed:{onRoutes:function(){return"/main/project"===this.$route.path?"1":"/main/case"===this.$route.path?"2":"/main/task"===this.$route.path?"3":"/main/report"===this.$route.path?"5":"1"}},data:function(){return{user:""}},created:function(){this.user=sessionStorage.getItem("user")},methods:{}},B=W,X=(a("3671"),Object(c["a"])(B,J,A,!1,null,null,null)),G=X.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticStyle:{height:"50px","text-align":"left",width:"100%"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showDialog()}}},[e._v("创建")])],1),a("el-row",e._l(e.tableData,(function(t,s){return a("div",{key:s},[a("el-col",{staticClass:"project-card",attrs:{span:7}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.name)+" ")]),a("span",{staticStyle:{float:"right",padding:"3px 0"}}),a("div",{staticStyle:{float:"right"}},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-setting"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showEdit(t.id)}}},[e._v("编辑 ")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleteProject(t.id)}}},[e._v("删除 ")])],1)],1)],1)],1)]),a("img",{staticClass:"image",staticStyle:{height:"235px",width:"235px"},attrs:{src:t.image,alt:""}})])],1)],1)})),0),a("div",{staticStyle:{height:"100%","text-align":"right"}}),a("div",{staticStyle:{width:"100%","text-align":"right"}},[a("el-pagination",{attrs:{"cy-data":"ProjectPagination",background:"",layout:"prev, pager, next","page-size":e.req.size,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e.dialogFlag?a("projectDialog",{attrs:{title:e.dialogTitle,pid:e.curretProjectId},on:{cancel:e.closeDiglog}}):e._e()],1)},K=[],Q=a("1da1"),Z=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.showTitle,visible:e.dialogVisible,width:"520px","before-close":e.closeDiglog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.projectForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),a("el-form-item",{attrs:{label:"项目描述",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.describe,callback:function(t){e.$set(e.projectForm,"describe",t)},expression:"projectForm.describe"}})],1),a("el-form-item",{attrs:{label:"上传图片",prop:"desc"}},[a("el-upload",{attrs:{action:"#","before-upload":e.beforeUpload,"file-list":e.fileList,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.imageVisible},on:{"update:visible":function(t){e.imageVisible=t}}},[a("img",{attrs:{width:"100%",src:e.imageUrl,alt:""}})])],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")]),a("el-button",{on:{click:e.closeDiglog}},[e._v("取消")])],1)],1)],1)}),ee=[],te=(a("b0c0"),function(){function e(){Object($["a"])(this,e)}return Object(T["a"])(e,[{key:"getProjects",value:function(e){return E.get("/api/projects/list",e)}},{key:"getProject",value:function(e){return E.get("/api/projects/"+e+"/")}},{key:"delProject",value:function(e){return E.delete("/api/projects/"+e+"/")}},{key:"createProject",value:function(e){return E.post("/api/projects/",e)}},{key:"updateProject",value:function(e,t){return E.put("/api/projects/"+e+"/",t)}},{key:"uploadImage",value:function(e){return S()({method:"post",url:"/api/projects/upload",timeout:2e4,data:e})}}]),e}()),ae=new te,se={props:["title","pid"],name:"projectDialog",data:function(){return{showTitle:"",imageUrl:"",imageVisible:!1,dialogVisible:!0,projectForm:{name:"",describe:"",image:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},fileList:[]}},mounted:function(){"create"===this.title?this.showTitle="创建项目":"edit"===this.title&&(this.showTitle="编辑项目",this.initProject())},methods:{handleRemove:function(e){console.log("删除",e)},handlePreview:function(e,t){console.log(t),this.imageUrl=e.url,this.imageVisible=!0},closeDiglog:function(){this.$emit("cancel",{})},initProject:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae.getProject(e.pid);case 2:a=t.sent,!0===a.success?(e.projectForm=a.item,e.fileList.push({name:a.item.image,url:"static/images/"+a.item.image}),e.$message.success("查询成功")):e.$message.error("查询失败");case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"create"===t.title?ae.createProject(t.projectForm).then((function(e){!0===e.success?(t.closeDiglog(),t.$message.success("创建成功！")):t.$message.error(e.error.message)})):"edit"===t.title&&ae.updateProject(t.pid,t.projectForm).then((function(e){!0===e.success?(t.closeDiglog(),t.$message.success("编辑成功！")):t.$message.error(e.error.message)}))}))},beforeUpload:function(e){var t=this;console.log(e);var a=new FormData;return a.append("file",e),ae.uploadImage(a).then((function(a){if(!0===a.data.success){t.projectForm.image=a.data.item.name;var s="/static/images/"+a.data.item.name;console.log("imagePath",s),t.fileList.push({name:e.name,url:s}),t.$message.success("上传成功！")}else console.log("上传失败",a),t.$message.error(a.error.message)})),!0}}},re=se,ne=Object(c["a"])(re,Z,ee,!1,null,null,null),oe=ne.exports,ie={name:"Project",components:{projectDialog:oe},data:function(){return{tableData:[],total:50,dialogFlag:!1,dialogTitle:"create",curretProjectId:"",req:{page:1,size:6}}},mounted:function(){this.initProjectlist()},methods:{initProjectlist:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae.getProjects(e.req);case 2:if(a=t.sent,!0===a.success){for(s=0;s<a.items.length;s++)a.items[s].image="/static/images/"+a.items[s].image;e.tableData=a.items,e.total=a.total,e.$message.success("查询成功")}else e.$message.error("查询失败");case 4:case"end":return t.stop()}}),t)})))()},showEdit:function(e){this.curretProjectId=e,this.dialogTitle="edit",this.dialogFlag=!0},deleteProject:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,ae.delProject(e);case 2:s=a.sent,!0===s.success?(t.tableData=s.items,t.total=s.total,t.$message.success("删除成功"),t.initProjectlist()):t.$message.error("删除失败");case 4:case"end":return a.stop()}}),a)})))()},showDialog:function(){this.dialogTitle="create",this.dialogFlag=!0},closeDiglog:function(){this.dialogFlag=!1,this.initProjectlist()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.req.page=e,this.initProjectlist()}}},le=ie,ce=(a("7159"),Object(c["a"])(le,Y,K,!1,null,null,null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"case"},[a("div",{staticStyle:{height:"100px",width:"100%"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"项目列表"}},[a("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.changeProject},model:{value:e.projectValue,callback:function(t){e.projectValue=t},expression:"projectValue"}},e._l(e.projectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.createCase()}}},[e._v("创建用例")])],1)],1)],1),a("el-card",{staticStyle:{width:"20%",float:"left"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.createRootModule}},[e._v("根节点 ")]),a("div",{staticStyle:{"margin-top":"6px"}},[a("el-tree",{attrs:{data:e.moduleDate,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(s.label))]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.append(r)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(s,r)}}},[a("i",{staticClass:"el-icon-delete"})])],1)])}}])})],1)],1),a("div",{staticStyle:{width:"79%",float:"right"}},[a("el-table",{attrs:{data:e.caseData,border:""},on:{"row-click":e.caseRowClick}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"40"}}),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"12%"}}),a("el-table-column",{attrs:{prop:"module.name",label:"所属模块","min-width":"12%"}}),a("el-table-column",{attrs:{prop:"method",label:"请求类型","min-width":"5%"}}),a("el-table-column",{attrs:{prop:"url",label:"URL",width:"220"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间","min-width":"12%"}}),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间","min-width":"12%"}})],1)],1),a("el-drawer",{attrs:{title:e.caseTitle,visible:e.drawer,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[e.drawer?a("caseDialog",{attrs:{mid:e.currentModule,cid:e.caseId}}):e._e()],1),e.dialogFlag?a("caseModuleDialog",{attrs:{rootId:e.rootFlag,pid:e.projectValue,proLabel:e.projectLabel,parentObj:e.parentObj},on:{cancel:e.closeDiglog}}):e._e()],1)},me=[],pe=(a("7db0"),function(){function e(){Object($["a"])(this,e)}return Object(T["a"])(e,[{key:"getProModule",value:function(e){return E.get("/api/modules/tree",e)}},{key:"createModules",value:function(e){return E.post("/api/modules/",e)}},{key:"deleteModules",value:function(e){return E.delete("/api/modules/"+e+"/")}},{key:"getModuleCases",value:function(e){return E.get("/api/modules/"+e+"/cases")}},{key:"updateProject",value:function(e,t){return E.put("/api/projects/"+e+"/",t)}}]),e}()),fe=new pe,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.showTitle,visible:e.dialogVisible,width:"520px","before-close":e.closeDiglog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.moduleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目",prop:"name"}},[a("el-input",{attrs:{disabled:""},model:{value:e.proLabel,callback:function(t){e.proLabel=t},expression:"proLabel"}})],1),""!==e.parentObj.label?a("el-form-item",{attrs:{label:"父节点"}},[a("el-input",{attrs:{disabled:""},model:{value:e.parentObj.label,callback:function(t){e.$set(e.parentObj,"label",t)},expression:"parentObj.label"}})],1):e._e(),a("el-form-item",{attrs:{label:"模块名",prop:"desc"}},[a("el-input",{model:{value:e.moduleForm.name,callback:function(t){e.$set(e.moduleForm,"name",t)},expression:"moduleForm.name"}})],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")]),a("el-button",{on:{click:e.closeDiglog}},[e._v("取消")])],1)],1)],1)},he=[],be={props:["rootId","pid","proLabel","parentObj"],name:"projectDialog",data:function(){return{showTitle:"",dialogVisible:!0,moduleForm:{name:"",project_id:0,parent_id:0},rules:{name:[{required:!0,message:"请输入模块名称",trigger:"blur"}]},fileList:[]}},mounted:function(){this.moduleForm.project_id=this.pid,!0===this.rootId?this.showTitle="创建根节点":(this.showTitle="创建子节点",this.moduleForm.parent_id=this.parentObj.id)},methods:{closeDiglog:function(){this.$emit("cancel",{})},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&fe.createModules(t.moduleForm).then((function(e){!0===e.success?(t.closeDiglog(),t.$message.success("创建成功！")):t.$message.error(e.error.msg)}))}))}}},ve=be,ke=Object(c["a"])(ve,ge,he,!1,null,null,null),we=ke.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div-line",staticStyle:{"margin-left":"10px","margin-right":"10px"}},[a("div",{staticStyle:{height:"50px"}},[a("el-select",{staticStyle:{width:"15%",float:"left"},attrs:{placeholder:"方法",size:"small"},model:{value:e.caseForm.method,callback:function(t){e.$set(e.caseForm,"method",t)},expression:"caseForm.method"}},e._l(e.methodOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{float:"left",width:"70%"},attrs:{placeholder:"URL",size:"small"},model:{value:e.caseForm.url,callback:function(t){e.$set(e.caseForm,"url",t)},expression:"caseForm.url"}},[e._v("URL")]),a("el-button",{staticStyle:{float:"left",width:"10%"},attrs:{type:"primary",plain:"",size:"small"},on:{click:e.sendCase}},[e._v("发送")])],1),a("div",[a("el-radio",{attrs:{label:"params"},model:{value:e.caseForm.params_type,callback:function(t){e.$set(e.caseForm,"params_type",t)},expression:"caseForm.params_type"}},[e._v("params")]),a("el-radio",{attrs:{label:"form"},model:{value:e.caseForm.params_type,callback:function(t){e.$set(e.caseForm,"params_type",t)},expression:"caseForm.params_type"}},[e._v("Form-date")]),a("el-radio",{attrs:{label:"json"},model:{value:e.caseForm.params_type,callback:function(t){e.$set(e.caseForm,"params_type",t)},expression:"caseForm.params_type"}},[e._v("JSON")])],1),a("div",{staticStyle:{height:"220px"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"Headers",name:"first"}},[a("vueJsonEditor",{attrs:{mode:"code"},model:{value:e.caseForm.header,callback:function(t){e.$set(e.caseForm,"header",t)},expression:"caseForm.header"}})],1),a("el-tab-pane",{attrs:{label:"Params/Body",name:"second"}},[a("vueJsonEditor",{attrs:{mode:"code"},model:{value:e.caseForm.params_body,callback:function(t){e.$set(e.caseForm,"params_body",t)},expression:"caseForm.params_body"}})],1)],1)],1),a("div",{staticStyle:{height:"200px"}},[a("i",{staticStyle:{float:"left"}},[e._v("response:")]),a("el-input",{attrs:{type:"textarea",rows:7,placeholder:"Response"},model:{value:e.caseForm.response,callback:function(t){e.$set(e.caseForm,"response",t)},expression:"caseForm.response"}})],1),a("div",[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"断 言",name:"2"}},[a("div",{staticStyle:{height:"30px"}},[a("el-radio",{attrs:{label:"include"},model:{value:e.caseForm.assert_type,callback:function(t){e.$set(e.caseForm,"assert_type",t)},expression:"caseForm.assert_type"}},[e._v("include")]),a("el-radio",{attrs:{label:"equal"},model:{value:e.caseForm.assert_type,callback:function(t){e.$set(e.caseForm,"assert_type",t)},expression:"caseForm.assert_type"}},[e._v("equal")]),a("el-button",{staticClass:"debug-button",attrs:{type:"success ",plain:"",size:"small"},on:{click:e.assertClick}},[e._v("断 言")])],1),a("div",[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"assertequal"},model:{value:e.caseForm.assert_text,callback:function(t){e.$set(e.caseForm,"assert_text",t)},expression:"caseForm.assert_text"}})],1)])],1)],1),a("div",{staticStyle:{height:"70px"}},[a("el-input",{staticStyle:{float:"left",width:"80%"},attrs:{placeholder:"用例名称",size:"small"},model:{value:e.caseForm.name,callback:function(t){e.$set(e.caseForm,"name",t)},expression:"caseForm.name"}},[e._v("case")]),a("el-button",{staticStyle:{float:"left",width:"10%"},attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return e.saveClick()}}},[e._v("保 存")])],1)])},_e=[],je=(a("ac1f"),a("5319"),a("e9c4"),a("45a3")),xe=function(){function e(){Object($["a"])(this,e)}return Object(T["a"])(e,[{key:"casesDebug",value:function(e){return E.post("/api/cases/debug",e)}},{key:"assertCase",value:function(e){return E.post("/api/cases/assert",e)}},{key:"createCase",value:function(e){return E.post("/api/cases/",e)}},{key:"getCases",value:function(e){return E.get("/api/cases/"+e+"/")}},{key:"updateCases",value:function(e,t){return E.put("/api/cases/"+e+"/",t)}}]),e}(),Fe=new xe,Ce={props:["mid","cid"],name:"caseDialog",components:{vueJsonEditor:je["a"]},data:function(){return{methodOptions:[{value:"get",label:"GET"},{value:"post",label:"POST"},{value:"put",label:"PUT"},{value:"delete",label:"DELETE"}],value:"",activeNames:["1"],activeName:"second",caseForm:{name:"",module_id:0,url:"",method:"get",header:{},params_type:"params",params_body:{},response:"",assert_type:"include",assert_text:""}}},mounted:function(){this.caseForm.module_id=this.mid,0!==this.cid&&this.getInfoCase()},methods:{getInfoCase:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Fe.getCases(e.cid);case 2:a=t.sent,!0===a.success?(e.caseForm=a.item,console.log(a.item),s=a.item.header.replace(/'/g,'"'),r=a.item.params_body.replace(/'/g,'"'),e.caseForm.header=JSON.parse(s),e.caseForm.params_body=JSON.parse(r)):e.$message.error(a.error.msg);case 4:case"end":return t.stop()}}),t)})))()},sendCase:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={method:e.caseForm.method,url:e.caseForm.url,header:JSON.stringify(e.caseForm.header),params_type:e.caseForm.params_type,params_body:JSON.stringify(e.caseForm.params_body)},t.next=3,Fe.casesDebug(a);case 3:s=t.sent,!0===s.success?(e.caseForm.response=s.item.response,console.log("resp:",s)):console.log("res___",s);case 5:case"end":return t.stop()}}),t)})))()},assertClick:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={response:e.caseForm.response,assert_type:e.caseForm.assert_type,assert_text:e.caseForm.assert_text},t.next=3,Fe.assertCase(a);case 3:s=t.sent,!0===s.success?(console.log("resp:",s),e.$message.success("断言成功")):(console.log("res___",s),e.$message.error("断言失败"));case 5:case"end":return t.stop()}}),t)})))()},saveClick:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.cid){t.next=7;break}return t.next=3,Fe.createCase(e.caseForm);case 3:a=t.sent,!0===a.success?e.$message.success("保存成功"):e.$message.error(a.error.msg),t.next=11;break;case 7:return t.next=9,Fe.updateCases(e.cid,e.caseForm);case 9:s=t.sent,!0===s.success?e.$message.success("编辑成功"):e.$message.error(s.error.msg);case 11:case"end":return t.stop()}}),t)})))()}}},Oe=Ce,$e=(a("5cf9"),a("e222"),Object(c["a"])(Oe,ye,_e,!1,null,"6b27d38a",null)),Te=$e.exports,Re={data:function(){return{rootFlag:!0,dialogFlag:!1,moduleDate:[],projectOptions:[],projectValue:1,projectLabel:"",parentObj:{},caseData:[],drawer:!1,caseTitle:"",value:"",currentModule:0,caseId:0}},components:{caseModuleDialog:we,caseDialog:Te},mounted:function(){this.initProjectlist(),this.initModulelist(this.projectValue)},methods:{append:function(e){this.parentObj=e,this.dialogFlag=!0,this.rootFlag=!1},remove:function(e,t){var a=this;fe.deleteModules(t.id).then((function(e){!0===e.success?(a.$message.success("删除成功！"),a.initModulelist(a.projectValue)):a.$message.error(e.error.msg)}))},initProjectlist:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae.getProjects(e.req);case 2:if(a=t.sent,!0===a.success)for(e.projectValue=a.items[0].id,e.projectLabel=a.items[0].name,s=0;s<a.items.length;s++)e.projectOptions.push({value:a.items[s].id,label:a.items[s].name});case 4:case"end":return t.stop()}}),t)})))()},changeProject:function(e){this.projectLabel=this.projectOptions.find((function(t){return t.value===e})).label,this.projectValue=e,this.getCaselist(),this.initModulelist(e)},initModulelist:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={project_id:e},a.next=3,fe.getProModule(s);case 3:r=a.sent,!0===r.success&&(t.moduleDate=r.items);case 5:case"end":return a.stop()}}),a)})))()},createRootModule:function(){this.dialogFlag=!0,this.rootFlag=!0},closeDiglog:function(){this.dialogFlag=!1,this.parentObj={},this.initModulelist(this.projectValue)},nodeClick:function(e){console.log(e),this.getCaselist(e.id),this.currentModule=e.id},getCaselist:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fe.getModuleCases(e);case 2:s=a.sent,!0===s.success&&(t.caseData=s.items,t.$message.success("查询成功"));case 4:case"end":return a.stop()}}),a)})))()},createCase:function(){this.drawer=!0,this.caseTitle="创建用例",this.caseId=0},caseRowClick:function(e){this.drawer=!0,console.log(e),this.caseId=e.id,this.caseTitle="调试用例"},onJsonChange:function(e){console.log("value",e)}}},Se=Re,De=(a("90ef"),Object(c["a"])(Se,de,me,!1,null,"5ae8409e",null)),Pe=De.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tasks"},[a("div",{staticStyle:{height:"100px",width:"100%"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"项目列表"}},[a("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.changeProject},model:{value:e.projectTaskId,callback:function(t){e.projectTaskId=t},expression:"projectTaskId"}},e._l(e.projectTaskOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.createTasks()}}},[e._v("创建任务")])],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tasksData,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"60"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"220"}}),a("el-table-column",{attrs:{prop:"describe",label:"描述",width:"400"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"250"}}),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"250"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("div",[a("el-tag",{attrs:{type:"info"}},[e._v("未执行")])],1):1===t.row.status?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("执行中")])],1):2===t.row.status?a("div",[a("el-tag",[e._v("已执行")])],1):a("div",[a("el-tag",{attrs:{type:"danger"}},[e._v("未知状态")])],1)]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.runningTasks(t.row)}}},[e._v("执行")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editTasks(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteTasks(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-pagination",{attrs:{"cy-data":"ProjectPagination",background:"",layout:"prev, pager, next","page-size":e.tasksReq.size,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e.dialogFlag?a("tasksDialog",{attrs:{title:e.dialogTitle,pid:e.projectTaskId,tid:e.taskId},on:{cancel:e.closeDiglog}}):e._e()],1)},Le=[],Me=(a("a434"),function(){function e(){Object($["a"])(this,e)}return Object(T["a"])(e,[{key:"createTasks",value:function(e){return E.post("/api/tasks/",e)}},{key:"getTasksList",value:function(e){return E.get("/api/tasks/list",e)}},{key:"getTaskDetail",value:function(e){return E.get("/api/tasks/"+e+"/")}},{key:"updateTasks",value:function(e,t){return E.put("/api/tasks/"+e+"/",t)}},{key:"deleteTask",value:function(e){return E.delete("/api/tasks/"+e+"/")}},{key:"runTasks",value:function(e){return E.post("/api/tasks/"+e+"/running")}}]),e}()),Ee=new Me,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.showTitle,visible:e.dialogVisible,width:"800px","before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.taskForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.taskForm.name,callback:function(t){e.$set(e.taskForm,"name",t)},expression:"taskForm.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.taskForm.describe,callback:function(t){e.$set(e.taskForm,"describe",t)},expression:"taskForm.describe"}})],1),a("el-form-item",[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-card",{staticStyle:{width:"28%",float:"left"}},[a("el-tree",{attrs:{data:e.moduleData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(s.label))])])}}])})],1),a("div",{staticStyle:{width:"70%",float:"right"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.casesData,border:""},on:{select:e.selectionOneCase,"select-all":e.selectionAllCases}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}})],1)],1)],1)]),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("div",{staticClass:"dialog-footer"},[e._v(" 已选择【"+e._s(this.caseNum)+"】条用例 "),a("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)])],1)],1)},qe=[],ze={name:"Dialog",props:["title","pid","tid"],components:{},data:function(){return{showTitle:"",dialogVisible:!0,taskForm:{project:0,name:"",describe:"",cases:[]},rules:{name:[{required:!0,message:"请输入任务的名称",trigger:"blur"}]},moduleData:[],casesData:[],currentModuleId:0,caseNum:0}},mounted:function(){this.taskForm.project=this.pid,"create"===this.title?this.showTitle="创建任务":"edit"===this.title&&(this.showTitle="编辑任务"),this.initModuleList()},methods:{closeDialog:function(){this.$emit("cancel",{})},initModuleList:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={project_id:e.pid},t.next=3,fe.getProModule(a);case 3:s=t.sent,!0===s.success?(e.moduleData=s.items,"edit"===e.title&&e.initTaskInfo()):e.$message.error("查询失败！");case 5:case"end":return t.stop()}}),t)})))()},initTaskInfo:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ee.getTaskDetail(e.tid);case 2:a=t.sent,!0===a.success?(e.taskForm=a.item,e.calculationCase()):e.$message.error("查询失败！");case 4:case"end":return t.stop()}}),t)})))()},nodeClick:function(e){this.currentModuleId=e.id,this.getModuleCaseList(e.id)},selectionAllCases:function(e){console.log("选择所有用例",e),this.selectiveCase(e)},selectionOneCase:function(e,t){console.log("selection-one-change",e),console.log("selection-one-change",t),this.selectiveCase(e)},selectiveCase:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);for(var s=!1,r=0;r<this.taskForm.cases.length;r++)this.taskForm.cases[r].moduleId===this.currentModuleId&&(s=!0,this.taskForm.cases[r].casesId=t);!1===s&&this.taskForm.cases.push({moduleId:this.currentModuleId,casesId:t}),this.calculationCase()},getModuleCaseList:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fe.getModuleCases(e);case 2:s=a.sent,!0===s.success?(t.casesData=s.items,t.$nextTick((function(){for(var a=[],s=0;s<t.taskForm.cases.length;s++)t.taskForm.cases[s].moduleId===e&&(a=t.taskForm.cases[s].casesId);for(var r=[],n=0;n<a.length;n++)for(var o=0;o<t.casesData.length;o++)a[n]===t.casesData[o].id&&r.push(t.casesData[o]);r.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)}))}))):t.$message.error(s.error.message);case 4:case"end":return a.stop()}}),a)})))()},calculationCase:function(){this.caseNum=0;for(var e=0;e<this.taskForm.cases.length;e++)this.caseNum+=this.taskForm.cases[e].casesId.length},initProject:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae.getProject(e.pid);case 2:a=t.sent,!0===a.success?(e.taskForm=a.item,e.fileList.push({name:a.item.image,url:"static/images/"+a.item.image}),e.$message.success("项目详情成功！")):e.$message.error("项目详情失败！");case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"create"===t.title?Ee.createTasks(t.taskForm).then((function(e){!0===e.success?(t.closeDialog(),t.$message.success("创建成功！")):t.$message.error(e.error.message)})):"edit"===t.title&&Ee.updateTasks(t.tid,t.taskForm).then((function(e){!0===e.success?(t.closeDialog(),t.$message.success("更新成功！")):t.$message.error(e.error.message)}))}))}}},Ne=ze,Ue=(a("1818"),Object(c["a"])(Ne,Ve,qe,!1,null,"331e4c60",null)),He=Ue.exports,Je={name:"tasks",components:{tasksDialog:He},data:function(){return{tasksReq:{project_id:1,page:1,size:6},projectTaskId:1,projectTaskOptions:[],total:50,dialogFlag:!1,dialogTitle:"create",tasksData:[],taskId:"",taskHeartbeat:null}},mounted:function(){var e=this;this.initProjectlist(),this.taskHeartbeat=setInterval((function(){e.initTasksList()}),5e3)},destroyed:function(){clearInterval(this.taskHeartbeat)},methods:{deleteTask:function(e,t){t.splice(e,1)},onSubmit:function(){console.log("submit!")},initProjectlist:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae.getProjects();case 2:if(a=t.sent,!0===a.success){for(e.projectTaskId=a.items[0].id,s=0;s<a.items.length;s++)e.projectTaskOptions.push({value:a.items[s].id,label:a.items[s].name});e.initTasksList()}case 4:case"end":return t.stop()}}),t)})))()},initTasksList:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tasksReq.project_id=e.projectTaskId,t.next=3,Ee.getTasksList(e.tasksReq);case 3:a=t.sent,!0===a.success&&(e.total=a.total,console.log("total__>",a),e.tasksData=a.items);case 5:case"end":return t.stop()}}),t)})))()},changeProject:function(e){this.projectTaskId=e,this.initTasksList()},deleteTasks:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ee.deleteTask(e.id);case 2:s=a.sent,!0===s.success?(t.$message.success("删除成功"),t.initProjectlist()):t.$message.error("删除失败");case 4:case"end":return a.stop()}}),a)})))()},runningTasks:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ee.runTasks(e.id);case 2:s=a.sent,!0===s.success?t.$message.success("执行成功"):t.$message.error("执行失败");case 4:case"end":return a.stop()}}),a)})))()},createTasks:function(){this.dialogTitle="create",this.dialogFlag=!0},editTasks:function(e){this.dialogTitle="edit",this.taskId=e.id,console.log("taskid--\x3e",this.taskId),this.dialogFlag=!0},closeDiglog:function(){this.dialogFlag=!1,this.initTasksList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.tasksReq.page=e,this.initTasksList()}}},Ae=Je,We=(a("6034"),Object(c["a"])(Ae,Ie,Le,!1,null,null,null)),Be=We.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tasks"},[a("div",{staticStyle:{height:"100px","text-align":"left",width:"100%"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"项目列表"}},[a("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.changeProject},model:{value:e.projectTaskId,callback:function(t){e.projectTaskId=t},expression:"projectTaskId"}},e._l(e.projectTaskOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reportData,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID","min-width":"5%"}}),e._v(" > "),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"11%"}}),a("el-table-column",{attrs:{prop:"tests",label:"总数","min-width":"5%"}}),a("el-table-column",{attrs:{prop:"passed",label:"通过","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.passed))])]}}])}),a("el-table-column",{attrs:{prop:"error",label:"错误","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.error))])]}}])}),a("el-table-column",{attrs:{prop:"failure",label:"失败","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"Warning"}},[e._v(e._s(t.row.failure))])]}}])}),a("el-table-column",{attrs:{prop:"skipped",label:"跳过","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.skipped))])]}}])}),a("el-table-column",{attrs:{prop:"run_time",label:"运行时间","min-width":"5%"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间","min-width":"10%"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.showReport(t.row)}}},[e._v("查看 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteReport(t.row)}}},[e._v("删除 ")])]}}])})],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-pagination",{attrs:{"cy-data":"ProjectPagination",background:"",layout:"prev, pager, next","page-size":e.tasksReq.size,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e.dialogFlag?a("reportDialog",{attrs:{rid:e.reportId},on:{cancel:e.closeDiglog}}):e._e()],1)},Ge=[],Ye=function(){function e(){Object($["a"])(this,e)}return Object(T["a"])(e,[{key:"getReportList",value:function(e){return E.get("/api/reports/list",e)}},{key:"getReportDetail",value:function(e){return E.get("/api/reports/"+e+"/")}},{key:"deleteReport",value:function(e){return E.delete("/api/reports/"+e+"/")}}]),e}(),Ke=new Ye,Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.showTitle,visible:e.dialogVisible,width:"1000px","before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.reportForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"统计"}},[a("div",{style:{width:"380px",height:"380px"},attrs:{id:"myChart"}})]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reportData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"tests",label:"总数"}}),a("el-table-column",{attrs:{prop:"passed",label:"通过"}}),a("el-table-column",{attrs:{prop:"error",label:"错误"}}),a("el-table-column",{attrs:{prop:"failure",label:"失败"}}),a("el-table-column",{attrs:{prop:"skipped",label:"跳过"}}),a("el-table-column",{attrs:{prop:"run_time",label:"运行时间(S)"}})],1),a("el-form-item",{attrs:{label:"详细日志"}},[a("el-input",{attrs:{type:"textarea",rows:"10"},model:{value:e.detailLog,callback:function(t){e.detailLog=t},expression:"detailLog"}})],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取消")])],1)])],1)],1)},Ze=[],et=a("313e"),tt={name:"Dialog",props:["rid"],components:{},data:function(){return{showTitle:"查看报告",reportData:[],dialogVisible:!0,detailLog:"",chartOption:{tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:"50%",data:[{value:1,name:"跳过"},{value:1,name:"通过"},{value:1,name:"失败"},{value:1,name:"错误"}]}]},reportForm:{project:0,name:"",describe:"",cases:[]},moduleData:[],casesData:[],currentModuleId:0,caseNum:0}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},methods:{closeDialog:function(){this.$emit("cancel",{})},initChart:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=et["a"](document.getElementById("myChart")),t.next=3,Ke.getReportDetail(e.rid);case 3:s=t.sent,e.chartOption.series[0].data=[],!0===s.success&&(e.reportData.push(s.item),console.log("resp---\x3e",s.item),e.chartOption.series[0].data.push({value:s.item.skipped,name:"跳过"}),e.chartOption.series[0].data.push({value:s.item.passed,name:"通过"}),e.chartOption.series[0].data.push({value:s.item.failure,name:"失败"}),e.chartOption.series[0].data.push({value:s.item.error,name:"错误"}),e.detailLog=s.item.result),a.setOption(e.chartOption);case 7:case"end":return t.stop()}}),t)})))()}}},at=tt,st=(a("30a8"),Object(c["a"])(at,Qe,Ze,!1,null,"ef26c722",null)),rt=st.exports,nt={name:"report",components:{reportDialog:rt},data:function(){return{projectTaskId:1,projectTaskOptions:[],total:50,dialogFlag:!1,tasksReq:{project_id:1,page:1,size:6},reportData:[],reportId:""}},mounted:function(){this.initProjectlist()},methods:{initProjectlist:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae.getProjects();case 2:if(a=t.sent,!0===a.success){for(e.projectTaskId=a.items[0].id,s=0;s<a.items.length;s++)e.projectTaskOptions.push({value:a.items[s].id,label:a.items[s].name});e.initReportList()}case 4:case"end":return t.stop()}}),t)})))()},initReportList:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tasksReq.project_id=e.projectTaskId,t.next=3,Ke.getReportList(e.tasksReq);case 3:a=t.sent,!0===a.success&&(e.total=a.total,e.reportData=a.items);case 5:case"end":return t.stop()}}),t)})))()},changeProject:function(e){this.projectTaskId=e,this.initReportList()},deleteTasks:function(e){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ee.deleteTask(e.id);case 2:s=a.sent,!0===s.success?(t.$message.success("删除成功"),t.initProjectlist()):t.$message.error("删除失败");case 4:case"end":return a.stop()}}),a)})))()},showReport:function(e){this.reportId=e.id,this.dialogFlag=!0},closeDiglog:function(){this.dialogFlag=!1,this.initReportList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.tasksReq.page=e,this.initReportList()}}},ot=nt,it=(a("f7a0"),Object(c["a"])(ot,Xe,Ge,!1,null,null,null)),lt=it.exports;r["default"].use(p["a"]);var ct=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:H},{path:"/main",name:"Navigation",component:G,children:[{path:"home",component:F},{path:"project",component:ue},{path:"case",component:Pe},{path:"tasks",component:Be},{path:"report",component:lt}]}],ut=new p["a"]({mode:"hash",base:"",routes:ct});ut.beforeEach((function(e,t,a){"/login"===e.path||sessionStorage.token?a():a({path:"/login"})}));var dt=ut,mt=a("2f62");r["default"].use(mt["a"]);var pt=new mt["a"].Store({state:{},mutations:{},actions:{},modules:{}});r["default"].config.productionTip=!1,r["default"].use(o.a),new r["default"]({router:dt,store:pt,render:function(e){return e(m)}}).$mount("#app")},"5cf9":function(e,t,a){"use strict";a("6d2c")},"5d33":function(e,t,a){},6034:function(e,t,a){"use strict";a("23f5")},"6d2c":function(e,t,a){},7159:function(e,t,a){"use strict";a("187a")},"85ec":function(e,t,a){},"90ef":function(e,t,a){"use strict";a("eddc")},"9b19":function(e,t,a){e.exports=a.p+"img/logo.b9d4ac82.svg"},c653:function(e,t,a){},d6db:function(e,t,a){"use strict";a("e67a")},e222:function(e,t,a){"use strict";a("c653")},e457:function(e,t,a){},e67a:function(e,t,a){},eddc:function(e,t,a){},f7a0:function(e,t,a){"use strict";a("e457")}});
//# sourceMappingURL=app.eb7b8d8f.js.map